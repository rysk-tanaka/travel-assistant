# äº¤é€šæ‰‹æ®µåˆ¥èª¿æ•´æ©Ÿèƒ½ã®è©³ç´°åŒ–

## æ¦‚è¦
äº¤é€šæ‰‹æ®µåˆ¥èª¿æ•´æ©Ÿèƒ½ã‚’è©³ç´°åŒ–ã—ã€ã‚ˆã‚Šç²¾å¯†ãªæ¡ä»¶åˆ¤å®šã¨é©åˆ‡ãªæŒã¡ç‰©ææ¡ˆã‚’å®Ÿç¾ã—ã¾ã—ãŸã€‚

## å®Ÿè£…å†…å®¹

### 1. è©³ç´°ãªäº¤é€šæ‰‹æ®µãƒ«ãƒ¼ãƒ«ï¼ˆtransport_rules.yamlï¼‰
- **é£›è¡Œæ©Ÿ**: å›½å†…/å›½éš›ç·šã®åŒºåˆ¥ã€æ¶²ä½“åˆ¶é™ã€æ‰‹è·ç‰©åˆ¶é™
- **æ–°å¹¹ç·š**: æŒ‡å®šå¸­åˆ¸ç¢ºèªã€å¤§å‹è·ç‰©äºˆç´„ã€é§…å¼æƒ…å ±
- **è»Š**: è‡ªå®¶ç”¨è»Š/ãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼ã®åŒºåˆ¥ã€å­£ç¯€åˆ¥è£…å‚™ã€ETCã‚«ãƒ¼ãƒ‰
- **ãƒã‚¹**: é«˜é€Ÿãƒã‚¹/å¤œè¡Œãƒã‚¹ã®åŒºåˆ¥ã€å¿«é©ã‚°ãƒƒã‚º
- **ãã®ä»–**: è‡ªè»¢è»Šã€ãƒã‚¤ã‚¯ãªã©ã®ç‰¹æ®Šãªç§»å‹•æ‰‹æ®µ

### 2. æ¡ä»¶åˆ¤å®šã®æ”¹å–„ï¼ˆsmart_engine.pyï¼‰
```python
# æ–°å¹¹ç·šé§…ã®è©³ç´°ãƒªã‚¹ãƒˆ
shinkansen_cities = [
    "æ±äº¬", "å“å·", "æ–°æ¨ªæµœ", "å°ç”°åŸ", "ç†±æµ·",
    "ä¸‰å³¶", "æ–°å¯Œå£«", "é™å²¡", "æ›å·", "æµœæ¾",
    # ... å…¨æ–°å¹¹ç·šé§…
]

# è¦³å…‰åœ°åˆ¤å®šï¼ˆãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼æ¨å®šï¼‰
tourist_areas = ["æ²–ç¸„", "åŒ—æµ·é“", "çŸ³å£", "å®®å¤", "å±‹ä¹…å³¶", "å°è±†å³¶"]

# å¤œè¡Œãƒã‚¹åˆ¤å®šï¼ˆ0æ³Šã§é•·è·é›¢ç§»å‹•ï¼‰
if request.duration == 0 and any(city in request.destination for city in major_cities):
    additional_conditions["night_bus"] = True
```

### 3. å­£ç¯€åˆ¥èª¿æ•´
- **å†¬å­£ï¼ˆ12-3æœˆï¼‰**: ã‚¹ã‚¿ãƒƒãƒ‰ãƒ¬ã‚¹ã‚¿ã‚¤ãƒ¤ã€è§£æ°·ã‚¹ãƒ—ãƒ¬ãƒ¼ã€é›ªã‹ããƒ–ãƒ©ã‚·
- **å¤å­£ï¼ˆ6-9æœˆï¼‰**: è»Šå†…ç”¨æ—¥ã‚ˆã‘ã€ã‚¯ãƒ¼ãƒ©ãƒ¼ãƒœãƒƒã‚¯ã‚¹

## å®Ÿè¡Œä¾‹

### é£›è¡Œæ©Ÿã§æœ­å¹Œã¸ï¼ˆ2æ³Š3æ—¥ãƒ»6æœˆï¼‰
```
ğŸ“‹ è¿½åŠ ã•ã‚Œã‚‹æŒã¡ç‰© (8å€‹):
  ã€ç§»å‹•é–¢é€£ã€‘
    âœ“ æ©Ÿå†…æŒã¡è¾¼ã¿ç”¨é€æ˜è¢‹ï¼ˆ1Lä»¥ä¸‹ï¼‰
    âœ“ ãƒ¢ãƒã‚¤ãƒ«ãƒãƒƒãƒ†ãƒªãƒ¼ï¼ˆæ‰‹è·ç‰©ç”¨ï¼‰
    âœ“ è€³æ “ãƒ»ã‚¢ã‚¤ãƒã‚¹ã‚¯
    âœ“ ãƒãƒƒã‚¯ãƒ”ãƒ­ãƒ¼
    âœ“ æ©Ÿå†…ç”¨ã‚¹ãƒªãƒƒãƒ‘
```

### è»Šã§é•·é‡ã¸ï¼ˆå†¬ãƒ»2æ³Š3æ—¥ãƒ»1æœˆï¼‰
```
ğŸ“‹ è¿½åŠ ã•ã‚Œã‚‹æŒã¡ç‰© (10å€‹):
  ã€ç§»å‹•é–¢é€£ã€‘
    âœ“ é‹è»¢å…è¨±è¨¼
    âœ“ ETCã‚«ãƒ¼ãƒ‰
    âœ“ ã‚¹ã‚¿ãƒƒãƒ‰ãƒ¬ã‚¹ã‚¿ã‚¤ãƒ¤/ãƒã‚§ãƒ¼ãƒ³
    âœ“ è§£æ°·ã‚¹ãƒ—ãƒ¬ãƒ¼
    âœ“ é›ªã‹ããƒ–ãƒ©ã‚·
```

## ä»Šå¾Œã®æ”¹å–„æ¡ˆ

### 1. ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã®æ‹¡å¼µ
```python
# Discord ã‚³ãƒãƒ³ãƒ‰ã§ã®è©³ç´°æŒ‡å®š
!trip smart å¤§é˜ª 2025-07-15 2025-07-16 business --transport=train --shinkansen=true
!trip smart æ²–ç¸„ 2025-08-10 2025-08-13 leisure --transport=car --rental=true
```

### 2. äº¤é€šæ‰‹æ®µã®è‡ªå‹•æ¨å®š
- è·é›¢ã¨æ™‚é–“ã‹ã‚‰æœ€é©ãªäº¤é€šæ‰‹æ®µã‚’ææ¡ˆ
- è¤‡æ•°ã®äº¤é€šæ‰‹æ®µã‚’çµ„ã¿åˆã‚ã›ãŸå ´åˆã®å¯¾å¿œ

### 3. åœ°åŸŸé€£æºã®å¼·åŒ–
- ç©ºæ¸¯/é§…ã‹ã‚‰ç›®çš„åœ°ã¾ã§ã®äºŒæ¬¡äº¤é€šè€ƒæ…®
- åœ°åŸŸç‰¹æœ‰ã®äº¤é€šäº‹æƒ…ï¼ˆä¾‹ï¼šæ²–ç¸„ã¯ãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼å¿…é ˆï¼‰

### 4. å­¦ç¿’æ©Ÿèƒ½ã¨ã®çµ±åˆ
- å€‹äººã®äº¤é€šæ‰‹æ®µã®å¥½ã¿å­¦ç¿’
- ã‚ˆãå¿˜ã‚Œã‚‹äº¤é€šé–¢é€£ã‚¢ã‚¤ãƒ†ãƒ ã®å¼·èª¿

## ãƒ†ã‚¹ãƒˆæ–¹æ³•

### å˜ä½“ãƒ†ã‚¹ãƒˆ
```bash
# TransportRulesLoaderã®ãƒ†ã‚¹ãƒˆ
python -m pytest tests/unit/test_transport_rules.py

# çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆSmartEngineã¨ã®é€£æºï¼‰
python -m pytest tests/unit/test_smart_engine.py -k transport
```

### ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
```bash
# å„äº¤é€šæ‰‹æ®µã®å‹•ä½œç¢ºèª
python demo_transport.py
```

## APIä»•æ§˜

### TransportRulesLoader.get_transport_items()
```python
def get_transport_items(
    transport_method: TransportMethod,  # "airplane", "train", "car", "bus", "other"
    trip_duration: int,                 # æ—…è¡Œæ—¥æ•°
    is_domestic: bool = True,           # å›½å†…/å›½éš›
    month: int | None = None,           # æ—…è¡Œæœˆï¼ˆå­£ç¯€èª¿æ•´ç”¨ï¼‰
    additional_conditions: dict[str, Any] | None = None,  # è¿½åŠ æ¡ä»¶
) -> list[ChecklistItem]:
```

### è¿½åŠ æ¡ä»¶ã®ä¾‹
```python
additional_conditions = {
    "is_shinkansen": True,      # æ–°å¹¹ç·šåˆ©ç”¨
    "is_rental": True,          # ãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼åˆ©ç”¨
    "is_highway": True,         # é«˜é€Ÿãƒã‚¹åˆ©ç”¨
    "night_bus": True,          # å¤œè¡Œãƒã‚¹
    "long_distance": True,      # é•·è·é›¢ç§»å‹•
    "distance": 200,            # ç§»å‹•è·é›¢ï¼ˆkmï¼‰
    "large_luggage": True,      # å¤§å‹è·ç‰©ã‚ã‚Š
    "sub_method": "bicycle",    # ãã®ä»–ã®è©³ç´°ï¼ˆè‡ªè»¢è»Šã€ãƒã‚¤ã‚¯ç­‰ï¼‰
}
```

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- YAMLãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ã‚ˆã‚Šé«˜é€Ÿå‹•ä½œ
- æ¡ä»¶åˆ¤å®šã¯å˜ç´”ãªæ–‡å­—åˆ—æ¯”è¼ƒã§åŠ¹ç‡çš„
- å¹³å‡å‡¦ç†æ™‚é–“: < 10ms

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- æ¡ä»¶è©•ä¾¡ã«evalã‚’ä½¿ç”¨ã›ãšã€å®‰å…¨ãªå®Ÿè£…
- ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã¯å‹ãƒã‚§ãƒƒã‚¯ã§æ¤œè¨¼

---
*æœ€çµ‚æ›´æ–°: 2025-06-30*
